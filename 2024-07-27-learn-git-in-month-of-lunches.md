# 独習Gitを読んでいく

**Date:** 2024/07/27

## 所感
Gitの使い方を学ぶのにはいい本だと思うが、ある程度Gitを使った開発経験がある人には少し物足りないかもなと感じた。
ただ、GUIツールが復旧している昨今、CLIでのGit操作を学ぶことでクリック一つでできることが何をしているのか理解できるのはいいと思う。
実際仕事ではGUIツールを使っていたが、この本を読んでCLIを使う機会が増えた。（git rebase & squashの関係でCLIの使用は必須なのだが）
個人的に良かったのは16章のrebaseの説明だった。
プロジェクトでrebaseを使う機会があり学びたかったので、この章のために読んだと言っても過言ではない。

## chap1
- シラバス的なもの
- 進め方が書いてある

## chap2
### clone
指定されたURLからリポジトリをクローンする。
https://github.com/rickumali/RickUmaliVanityWebsite

```
ghq get git@github.com:rickumali/RickUmaliVanityWebsite.git
```

### git ls-files
```
git ls-files                                                                  [master]
.gitignore
README.txt
bio.tmpl
blog_start.tmpl
contact.tmpl
feedsn.pl
footer.tmpl
getfeed.pl
make_flickr_tmpl.sh
make_new_index.pl
make_ramblings_tmpl.sh
make_rick_index.sh
make_sports_tmpl.sh
make_tech_tmpl.sh
pictures_start.tmpl
process_flickr_feed.pl
process_sports_feed.pl
process_tech_feed.pl
processfeed.pl
rick-bootstrap.tmpl
sports_start.tmpl
tech_start.tmpl
```

### git blame
```
git blame master README.txt
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  1) rickumali-index
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  2)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  3) This is the software that generates the rickumali.com site.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  4)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400  5) This is a static site generated by a Perl-based static site generator. The
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400  6) templates were updated to Bootstrap in May 2021.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  7)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  8) --------------------------------------------------------------------------------
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  9)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 10) The site is generated from four sub templates, using these programs:
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 11)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 12)   make_sports_tmpl.sh -> getfeed.pl -> process_sports_feed.pl = sports.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 13)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 14)   make_ramblings_tmpl.sh -> getfeed.pl -> processfeed.pl = blog.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 15)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 16)   make_tech_tmpl.sh -> getfeed.pl -> process_tech_feed.pl = tech.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 17)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 18)   make_flickr_tmpl.sh -> wget -> process_flickr_feed.pl = pictures.tmpl
7308dd03 (Rick Umali 2013-01-07 23:03:45 -0500 19)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 20) Once these four subtemplates are generated, they are brought into the main
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 21) template (rick-bootstrap.tmpl).
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 22)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 23)   make_rick_index.sh -> make_new_index.pl ->
7308dd03 (Rick Umali 2013-01-07 23:03:45 -0500 24)     bio.tmpl + blog.tmpl + tech.tmpl + sports.tmpl + pictures.tmpl +
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 25)     contact.tmpl + footer.tmpl + rick-bootstrap.tmpl = index.html
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 26)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 27) The site used to be generated once an hour, but now it is generated whenever
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 28) there's an update.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 29)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 30) --------------------------------------------------------------------------------
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 31)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 32) References
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 33)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 34) http://www.template-toolkit.org/
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 35) https://getbootstrap.com/docs/5.0/
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 36) https://metacpan.org/release/libwww-perl
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 37) https://metacpan.org/pod/HTML::TokeParser
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 38)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 39) Rick Umali / www.rickumali.com / rickumali@gmail.com
```

### git log
```
git log --oneline
bf1e635 Removes Google Analytics
fbab02c Update README
a40b84d Retire YUI, Bring in Bootstrap
ad45574 Change footer 'made with' line
4f5219c Change bio text slightly
faeabf9 Remove <hr> tag
833feaa Revamp SportsBlog feed generation
0646a0b Center contacts; Remove unnecessary container
9b8be74 Revamp start templates
b0e154d Revamp contact template
7e16a6e Add margin and rule line; Remove jumbotron
92a3f2f Use nav component; Make pills stack when small
7253cb8 Merge branch 'master' into converting_to_bootstrap
a036110 Fixes issue with blank preview text
ff27815 Uses wget instead of getfeed.pl
ef62cd1 Fixes 'Can't use a hash as a reference' errors
~snip~
```

## chap3
- git configでuser.nameとuser.emailは設定してるので問題なし（gitconfigは色々いじってる。）
```
git config --list | egrep ('user.email'|'user.name')                          [master]
user.email=5511068t@gmail.com
user.name=shooonng
```

- git help helpでgit helpの使い方が表示される
```
git help help
```

### 課題
1. gitの情報の格納場所
  - .gitconfig
2. stupid content trackerが記載されているgit helpのページ
  - ?
3. フォワードポートするときのコマンド
  - git push
4. DAGとは
  - Directed Acyclic Graph
5. チュートリアル形式のgit helpのページ
  - git help tutorial
6.7. はコマンドについて操作の延長線だったので割愛

## chap4
- git init
  - リポジトリの初期化
- git status
  - リポジトリの状態を確認
- git add
  - ファイルの追加
- git commit
  - ファイルのコミット

```
$ echo -n conteints > fiefixup.sh
$ git status                                                                    [master]
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	fiefixup.sh

nothing added to commit but untracked files present (use "git add" to track)
$ git add filefixup.txt
$ git status                                                                    [master]
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
	new file:   filefixup.txt
$ git commit -m "Thisn is the first commit message"                             [master]
[master (root-commit) 0cadc17] Thisn is the first commit message
 1 file changed, 1 insertion(+)
 create mode 100644 filefixup.txt
```

git log --statでコミットの変更内容を表示できる
```
git log --stat                                                                [master]
commit 0cadc175a7d18bd4d51f55e21ef2d849b67b08c1 (HEAD -> master)
Author: shooonng <5511068t@gmail.com>
Date:   Sun Jul 28 11:51:39 2024 +0900

    Thisn is the first commit message

 filefixup.txt | 1 +
 1 file changed, 1 insertion(+)
 ```

 ### 課題
 git init,git add, git statusの練習なので割愛
 この本が全体的にWindowsを使用を前提で書かれているので、
 LFのエラーについて言及があるが、MacやLinuxでは発生しないので割愛する

 ## chap5
 この章ではgit guiを使って操作しているが、Macではgit guiが使えないので、眺める程度にとどめた。
 もし本章を実施するのであればVSCodeのGit機能やSourceTreeを使うといいかもしれない

 ## chap6
 一度コミットしたファイルに再度変更を加えて、git statusを実行すると、変更があることがわかる
 ```
 git status                                                                    [master]
 On branch master
 Changes not staged for commit:
   (use "git add <file>..." to update what will be committed)
   (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh

 no changes added to commit (use "git add" and/or "git commit -a")
 ```
 - git diffで変更内容を確認できる
 ```
 git diff                                                                      [master]
 diff --git a/math.sh b/math.sh
 index 7c516fd..d06edc9 100644
 --- a/math.sh
 +++ b/math.sh
 @@ -1 +1,2 @@
  # Comment
 +a=1
 ```

 - git commit -aで変更をコミットできる
 ```
 git commit -a -m "This is the cecond commit"                                  [master]
 [master 0586e5e] This is the cecond commit
  1 file changed, 1 insertion(+)
 ```

- ステージングにあるファイルを変更して、git statusを実行すると、作業ディレクトリとステージングエリアの差分が表示される
```
git status                                                                    [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   math.sh

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh
```

- git diffで作業ディレクトリとステージングエリアの差分を表示できる
```
git diff                                                                      [master]
diff --git a/math.sh b/math.sh
index 9a439d4..c591e72 100644
--- a/math.sh
+++ b/math.sh
@@ -1,4 +1,3 @@
 # Comment
 a=1
-echo $a
 b=2
```

- git diff --stageでステージングエリアとリポジトリの差分を表示できる
```
git diff --staged                                                             [master]
diff --git a/math.sh b/math.sh
index d06edc9..9a439d4 100644
--- a/math.sh
+++ b/math.sh
@@ -1,2 +1,4 @@
 # Comment
 a=1
+echo $a
+b=2
```

- git addにはdry-runオプションがある
```
git add --dry-run .                                                           [master]
add 'math.sh'
add 'a'
add 'b'
add 'c'
add 'd'
```

### 課題
1. git diff --stagedの代わり
  - git diff --cached
2. git addのdry-runオプションの代わり
  - git add -n
3. catコマンドで行番号を表示する方法
  - cat -n
5. git commit -aの代わりもっと長い別の形式
  - git commit --all

- 間違ってgit addをした場合、git reset HEAD <file>でステージングエリアから取り消すことができる

- git log --shortstat --oneline でコミットの簡易情報を表示できる

### chap7
- git rmでファイルを削除するとステージングエリアからも削除される
上がgit rm,下がrm
```
g status                                                                      [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	deleted:    b

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	deleted:    a
```

- git mvでファイル名を変更するとステージングエリアに追加される
```
g status                                                                      [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	renamed:    c -> another_rename
	renamed:    d -> renamed_file
```

- 部分的にコミットする
```
git add -p                                                                    [master]
```
eで編集、yでステージング、nでスキップ、qで終了

## chap8
- SHA1 IDはコミットのハッシュ値で、コミットの一意なIDを示す
- git log --parents --abbrev-commitは親コミットを表示する
- パッチ情報を出力
```
git log --patch
```

- HEADは最新のコミットを指す
- git rev-parse HEADとgit rev-parse masterは同じ結果を返す
- HEAD^は一つ前のコミットを指す
- HEAD^^^はHEADの親の親の親を指す masterの三つ前のコミットを指す　HEAD~3も同じ

## chap9
- コミットログは下から上に伸びるイメージ
- git brach, git checkoutの流れ
```
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:22
 (つ・ω・)つgit branch                                                                    [master]
* master
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:27
 (つ・ω・)つgit branch dev                                                                [master]
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:40
 (つ・ω・)つgit branch                                                                    [master]
  dev
* master
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:43
 (つ・ω・)つgit checkout dev                                                              [master]
Switched to branch 'dev'
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:27:30
 (つ・ω・)つgit branch                                                                       [dev]
* dev
  master
```
- git branch -dでブランチを削除できる
```
base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:27:37
 (つ・ω・)つgit branch -d master                                                             [dev]
Deleted branch master (was 33fdec5).
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:28:52
 (つ・ω・)つgit branch                                                                       [dev]
* dev
```

- git log --graphでコミットのグラフを表示できる(なかなか見やすいかも)
```
(つ・ω・)つg log --graph --decorate --pretty=oneline --all --abbrev-commit          [new_feature]
* e68c5e3 (HEAD -> new_feature) Starting a second new file
* 92a7ca3 Adding a new file to a new branch
| * 1adeefd (refs/stash) On master: !!GitHub_Desktop<master>
|/|
| * bbae30a index on master: 2fb2547 Removed a and b
|/
* 2fb2547 (master) Removed a and b
* 6404e5a Adding readme.txt
* 6adeab0 Adding four empty files
* 0586e5e This is the cecond commit
* 2145a3c This the first commit.
```

- git branch -vで最後のコミットメッセージを表示できる
```
(つ・ω・)つgit branch -v                                                            [new_feature]
  master      2fb2547 Removed a and b
* new_feature e68c5e3 Starting a second new file
```

- git branch SHA1でブランチを作成できる
```
(つ・ω・)つg log --oneline                                                               [master]
9c5a30e (HEAD -> master) A small update to readme.
2fb2547 Removed a and b
6404e5a Adding readme.txt
6adeab0 Adding four empty files
0586e5e This is the cecond commit
2145a3c This the first commit.
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:29:25
(つ・ω・)つgit branch fixing_readme 2fb2547                                              [master]
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:30:04
(つ・ω・)つgit checkout fixing_readme                                                    [master]
Switched to branch 'fixing_readme'
```

- git branch -bでブランチを作成してチェックアウトできる
- git branch -dでブランチを削除できる
- 削除したブランチを復元するにはgit reflogで削除したコミットのIDを確認してgit checkoutで復元する
```
(つ・ω・)つgit branch -d another_fix_branch                                              [master]
Deleted branch another_fix_branch (was 2fb2547).
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:41:49
 (つ・ω・)つgit checkout -b another_fix_branch 2fb2547                                    [master]
Switched to a new branch 'another_fix_branch'
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:42:26
 (つ・ω・)つg graph                                                           [another_fix_branch]
* 9c5a30e  (master) 2024-07-29 shooonng A small update to readme.
| * e68c5e3  (new_feature) 2024-07-29 shooonng Starting a second new file
| * 92a7ca3  2024-07-29 shooonng Adding a new file to a new branch
|/
| * 1adeefd  (refs/stash) 2024-07-29 shooonng On master: !!GitHub_Desktop<master>
|/|
| * bbae30a  2024-07-29 shooonng index on master: 2fb2547 Removed a and b
|/
* 2fb2547  (HEAD -> another_fix_branch) 2024-07-28 shooonng Removed a and b
* 6404e5a  2024-07-28 shooonng Adding readme.txt
* 6adeab0  2024-07-28 shooonng Adding four empty files
* 0586e5e  2024-07-28 shooonng This is the cecond commit
* 2145a3c  2024-07-28 shooonng This the first commit.
```

- git stashで変更を一時的に保存できる
- git stash listでstashのリストを表示できる
```
(つ・ω・)つg stash list                                                      [another_fix_branch]
stash@{0}: WIP on another_fix_branch: 2fb2547 Removed a and b
stash@{1}: On master: !!GitHub_Desktop<master>
```

- git stash popでstashを復元できる
```
(つ・ω・)つg stash pop                                                       [another_fix_branch]
On branch another_fix_branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (a6e0c9d15a5e3f15d4a0c6b8d407fd8cb9380428
```
- stashはスタックのデータ構造で管理されている

- git checkout -- <file>でファイルを直前のコミットに戻すことができる
```
(つ・ω・)つgit checkout -- math.sh
```

## chap10
- git mergeでブランチをマージできる
- git graphでマージのグラフ
```
つ・ω・)つg graph                                                           [another_fix_branch]
*   1443c68  (HEAD -> another_fix_branch) 2024-07-30 shooonng Merge branch 'master' into another_fix_branch
|\
* | 36bf1ad  2024-07-29 shooonng chap9 lecture
| * 9c5a30e  (master) 2024-07-29 shooonng A small update to readme.
|/
| * e68c5e3  (new_feature) 2024-07-29 shooonng Starting a second new file
| * 92a7ca3  2024-07-29 shooonng Adding a new file to a new branch
|/
| * 1adeefd  (refs/stash) 2024-07-29 shooonng On master: !!GitHub_Desktop<master>
|/|
| * bbae30a  2024-07-29 shooonng index on master: 2fb2547 Removed a and b
|/
* 2fb2547  2024-07-28 shooonng Removed a and b
* 6404e5a  2024-07-28 shooonng Adding readme.txt
* 6adeab0  2024-07-28 shooonng Adding four empty files
* 0586e5e  2024-07-28 shooonng This is the cecond commit
* 2145a3c  2024-07-28 shooonng This the first commit.
```

- git log -1
```
(つ・ω・)つgit log -1                                                        [another_fix_branch]
commit 1443c681ad3f9b3854c2636347509080fad12bc3 (HEAD -> another_fix_branch)
Merge: 36bf1ad 9c5a30e
Author: shooonng <5511068t@gmail.com>
Date:   Tue Jul 30 19:50:59 2024 +0900

    Merge branch 'master' into another_fix_branch
```
- git mergetoolでマージツールを起動できる

- fast-forwardマージ
```
(つ・ω・)つgit graph                                                                [new_feature]
* 3a3073b  (HEAD -> new_feature) 2024-07-30 shooonng Committing bar.
* b1b4a93  2024-07-30 shooonng Committing foo.
* 8f42c3b  (master) 2024-07-30 shooonng Committing baz.
* a2ee4e7  2024-07-30 shooonng Committing the README.
```

```
(つ・ω・)つgit checkout master                                                      [new_feature]
Switched to branch 'master'
(base) /Users/stanaka/tmp/buildtools/ff 24-07-30 20:05:48
 (つ・ω・)つgit merge new_feature                                                         [master]
Updating 8f42c3b..3a3073b
Fast-forward
 bar | 0
 foo | 0
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 bar
 create mode 100644 foo
(base) /Users/stanaka/tmp/buildtools/ff 24-07-30 20:05:52
 (つ・ω・)つgit graph                                                                     [master]
* 3a3073b  (HEAD -> master, new_feature) 2024-07-30 shooonng Committing bar.
* b1b4a93  2024-07-30 shooonng Committing foo.
* 8f42c3b  2024-07-30 shooonng Committing baz.
* a2ee4e7  2024-07-30 shooonng Committing the README.
```

### 課題
- git diff master...new_featureで差分を表示できる
- git merge-baseの意味
  - 2つのコミットの共通の祖先を見つける

## chap11
### クローンを作る
- git cloneで複製を作るリポジトリを指定できる
- git clone <url> <directory>でディレクトリ名を指定できる
```
git clone git@github.com:rickumali/RickUmaliVanityWebsite.git sample_git_practice
Cloning into 'sample_git_practice'...
remote: Enumerating objects: 307, done.
remote: Counting objects: 100% (70/70), done.
remote: Compressing objects: 100% (47/47), done.
remote: Total 307 (delta 34), reused 52 (delta 23), pack-reused 237
Receiving objects: 100% (307/307), 70.26 KiB | 235.00 KiB/s, done.
Resolving deltas: 100% (185/185), done.
``

- mathとmath.clone1
```
(base) /Users/stanaka/tmp/buildtools/math 24-07-30 20:17:15
 (つ・ω・)つgit log --simplify-by-decoration --decorate --all --oneline                   [master]
1443c68 (another_fix_branch) Merge branch 'master' into another_fix_branch
9c5a30e (HEAD -> master) A small update to readme.
e68c5e3 (new_feature) Starting a second new file
1adeefd (refs/stash) On master: !!GitHub_Desktop<master>
2145a3c This the first commit.

(base) /Users/stanaka/tmp/buildtools/math.clone1 24-07-30 20:19:56
 (つ・ω・)つgit branch --all                                                              [master]
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/another_fix_branch
  remotes/origin/master
  remotes/origin/new_feature
```

- ベアリポジトリ
  - ワーキングディレクトリがないリポジトリ
  - git clone --bareで作成できる
  - リモートリポジトリとして使える
  - リモートリポジトリとして使う場合は.gitを削除してリネームする

```
(つ・ω・)つgit clone --bare math math.git                                                [master]
Cloning into bare repository 'math.git'...
done.
(base) /Users/stanaka/tmp/buildtools 24-07-31 12:30:20
(つ・ω・)つcd math.git                                                                   [master]
fatal: this operation must be run in a work tree
(base) /Users/stanaka/tmp/buildtools/math.git 24-07-31 12:30:27
(つ・ω・)つls -F                                                                         [master]
 config   HEAD   hooks/   objects/   packed-refs   refs/
```

-- git ls-treeはツリーを表示する
```
(つ・ω・)つgit ls-tree HEAD                                                              [master]
100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	a
100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	c
100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391	d
100644 blob c591e722ee93485c7ecd81a93c45f75529ae2046	math.sh
100644 blob 52407b0c491cdeef109b6d9ef132729e360d4c6b	readme.txt
```

## chap12
- git remote renameでリモートリポジトリの名前を変更できる
```
(つ・ω・)つgit remote rename origin beginning                                            [master]
Renaming remote references: 100% (5/5), done.
(base) /Users/stanaka/tmp/buildtools/math.clone 24-07-31 12:52:01
(つ・ω・)つgit branch --all                                                              [master]
* master
 remotes/beginning/HEAD -> beginning/master
 remotes/beginning/another_fix_branch
 remotes/beginning/master
 remotes/beginning/new_feature
(base) /Users/stanaka/tmp/buildtools/math.clone 24-07-31 12:52:08
(つ・ω・)つgit remote -v show                                                            [master]
beginning	/Users/stanaka/tmp/buildtools/math.git (fetch)
beginning	/Users/stanaka/tmp/buildtools/math.git (push)
```

これはbobのリモートリポジトリを追加する
```
git remote add bob ../math.bob
```

- git ls-remoteでリモートリポジトリの情報を表示できる
```
(つ・ω・)つgit ls-remote .                                                               [master]
9c5a30efeb6937e32af4995df1a4daaaec37dac2	HEAD
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/heads/master
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/HEAD
1443c681ad3f9b3854c2636347509080fad12bc3	refs/remotes/origin/another_fix_branch
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/master
e68c5e3359fc8beaf256dfd3b3f9d9f83cecfef9	refs/remotes/origin/new_feature
```

- bobリポジトリでファイルをコミットした後にcarolリポジトリでgit ls-remoteを実行しるとSHA１が異なる
```
(base) /Users/stanaka/tmp/buildtools/math.carol 24-07-31 13:01:40
 (つ・ω・)つgit ls-remote bob                                                             [master]
9546bd738bd42de88ce003290ab0efc7f16fa2d2	HEAD
9546bd738bd42de88ce003290ab0efc7f16fa2d2	refs/heads/master
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/HEAD
1443c681ad3f9b3854c2636347509080fad12bc3	refs/remotes/origin/another_fix_branch
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/master
e68c5e3359fc8beaf256dfd3b3f9d9f83cecfef9	refs/remotes/origin/new_feature
(base) /Users/stanaka/tmp/buildtools/math.carol 24-07-31 13:01:48
 (つ・ω・)つgit ls-remote .                                                               [master]
9c5a30efeb6937e32af4995df1a4daaaec37dac2	HEAD
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/heads/master
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/HEAD
1443c681ad3f9b3854c2636347509080fad12bc3	refs/remotes/origin/another_fix_branch
9c5a30efeb6937e32af4995df1a4daaaec37dac2	refs/remotes/origin/master
e68c5e3359fc8beaf256dfd3b3f9d9f83cecfef9	refs/remotes/origin/new_feature
```

## chap13
- git pushについて
- masterブランチのSHA1が9c5a30e→1b478f4に変わった
```
(つ・ω・)つgit push origin master                                                        [master]
Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 8 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 296 bytes | 296.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
To /Users/stanaka/tmp/buildtools/math.git
   9c5a30e..1b478f4  master -> master
```

- リモートからブランチを削除するのは
```
(つ・ω・)つgit ls-remote origin                                                          [master]
1b478f4936075d4d8b8c149c894ceb862eb86506	HEAD
4c7b8729e08b985efdf9a94217e5160bf7a34335	refs/heads/another_fix_branch
1b478f4936075d4d8b8c149c894ceb862eb86506	refs/heads/master
1b478f4936075d4d8b8c149c894ceb862eb86506	refs/heads/new_branch
e68c5e3359fc8beaf256dfd3b3f9d9f83cecfef9	refs/heads/new_feature
(base) /Users/stanaka/tmp/buildtools/math.carol 24-08-01 4:04:34
 (つ・ω・)つgit push origin :new_branch                                                   [master]
To /Users/stanaka/tmp/buildtools/math.git
 - [deleted]         new_branch
```

## chap14
- git fetchでリモートリポジトリの情報を取得する
```
(base) /Users/stanaka/tmp/buildtools/math.carol 24-08-01 7:56:27
 (つ・ω・)つgit log --decorate --oneline --all                                            [master]
2eb0197 (HEAD -> master, origin/master, origin/HEAD) Small change
1443c68 (origin/another_fix_branch) Merge branch 'master' into another_fix_branch
36bf1ad chap9 lecture
9c5a30e A small update to readme.
e68c5e3 (origin/new_feature) Starting a second new file
92a7ca3 Adding a new file to a new branch
2fb2547 Removed a and b
6404e5a Adding readme.txt
6adeab0 Adding four empty files
0586e5e This is the cecond commit
2145a3c This the first commit.
(base) /Users/stanaka/tmp/buildtools/math.carol 24-08-01 7:56:37
 (つ・ω・)つgit fetch                                                                     [master]
remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), 259 bytes | 259.00 KiB/s, done.
From /Users/stanaka/tmp/buildtools/math
   2eb0197..f7b8b7c  master     -> origin/master
(base) /Users/stanaka/tmp/buildtools/math.carol 24-08-01 7:58:41
 (つ・ω・)つgit log --decorate --oneline --all                                            [master]
f7b8b7c (origin/master, origin/HEAD) Another tiny change
2eb0197 (HEAD -> master) Small change
1443c68 (origin/another_fix_branch) Merge branch 'master' into another_fix_branch
36bf1ad chap9 lecture
9c5a30e A small update to readme.
e68c5e3 (origin/new_feature) Starting a second new file
92a7ca3 Adding a new file to a new branch
2fb2547 Removed a and b
6404e5a Adding readme.txt
6adeab0 Adding four empty files
0586e5e This is the cecond commit
2145a3c This the first commit.
```

- HEADとFETCH_HEADを比較する
```
(つ・ω・)つgit diff HEAD..FETCH_HEAD                                                     [master]
diff --git a/another_rename b/another_rename
index 86d347f..fb7f0ae 100644
--- a/another_rename
+++ b/another_rename
@@ -1 +1,2 @@
Small change
+Tiny change
```

- mergeする
```
(つ・ω・)つgit merge FETCH_HEAD                                                          [master]
Updating 2eb0197..f7b8b7c
Fast-forward
another_rename | 1 +
1 file changed, 1 insertion(+)
```

- git pullはfetchとmergeを一度に行う
```
(つ・ω・)つgit push                                                                      [master]
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 285 bytes | 285.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
To /Users/stanaka/tmp/buildtools/math.git
  f7b8b7c..7b017b7  master -> master
```

- git config pull.ff onlyでfast-forwardのみを許可する

[caution]
- git pullよりもgit fetchとgit merge FETCH_HEADの方が安全

## chap15
- git log --parentsでマージコミットの親を表示する
```
f919f6c c4a172b 777fe2d (HEAD -> master, origin/master, origin/HEAD) Merge branch 'master' of /Users/stanaka/tmp/buildtools/math
c4a172b 2d668f2 syuusei
2d668f2 c9c80e2 DEF (on carol)
777fe2d c9c80e2 ABC (ob bill)
c9c80e2 ea79961 Alphabet (on carol)
ea79961 1a0eeba 6cb7640 Merge branch 'master' of /Users/stanaka/tmp/buildtools/math
1a0eeba 35f6660 6c0bfec Merge remote-tracking branch 'refs/remotes/origin/master'
6cb7640 6c0bfec Alphabet (on bill)
35f6660 fefe51b ABC part of alphabet
6c0bfec 7b017b7 JKL part of alphabet
7b017b7 f7b8b7c Small change 2 from bill
fefe51b f7b8b7c Small change 2 from carol
f7b8b7c 2eb0197 Another tiny change
2eb0197 9c5a30e Small change
9c5a30e 2fb2547 A small update to readme.
2fb2547 6404e5a Removed a and b
6404e5a 6adeab0 Adding readme.txt
6adeab0 0586e5e Adding four empty files
0586e5e 2145a3c This is the cecond commit
2145a3c This the first commit.
```

- git log --since mm/dd/yyyy --until mm/dd/yyyyで期間を指定して表示する
```
(つ・ω・)つgit log --since 7/1/2024 --until 7/31/2024
```

- git log --stat HEAD^..HEADで直前のコミットの変更を表示する
```
(つ・ω・)つgit log --stat HEAD^..HEAD
commit 4465c540dc79718076bcf66951d27fb65152a895 (HEAD -> master, origin/master, origin/HEAD)
Author: Rick Umali <rickumali@gmail.com>
Date:   Wed Aug 6 08:54:56 2014 -0500

    A small update to readme.

 readme.txt | 1 +
 1 file changed, 1 insertion(+)
 ```

 - ^(キャレット)は直前のコミットを指す

 - git branch --columnでブランチを表示する
 ```
 (つ・ω・)つgit branch --column                                                          [master]
   branch_01   branch_07   branch_13   branch_19   branch_25   branch_31   branch_37
   branch_02   branch_08   branch_14   branch_20   branch_26   branch_32   branch_38
   branch_03   branch_09   branch_15   branch_21   branch_27   branch_33   branch_39
   branch_04   branch_10   branch_16   branch_22   branch_28   branch_34   branch_40
   branch_05   branch_11   branch_17   branch_23   branch_29   branch_35 * master
   branch_06   branch_12   branch_18   branch_24   branch_30   branch_36
```

- git blameでファイルの変更履歴を表示する
```
(つ・ω・)つgit blame math.sh                                                            [master]
^2145a3c (shooonng 2024-07-28 12:18:02 +0900 1) # Comment
0586e5e4 (shooonng 2024-07-28 12:22:13 +0900 2) a=1
6adeab03 (shooonng 2024-07-28 12:36:47 +0900 3) b=2
```

- git notes addでノートを追加する
```
git notes add -m "This is an attached note"
git log -n 1                                                                 [master]
commit f919f6cdcaf375a23630a11450713b743206b85e (HEAD -> master, origin/master, origin/HEAD)
Merge: c4a172b 777fe2d
Author: shooonng <5511068t@gmail.com>
Date:   Thu Aug 1 08:39:32 2024 +0900

    Merge branch 'master' of /Users/stanaka/tmp/buildtools/math

Notes:
    This is an attached note
```

## chap16
- git rebaseについて
  - マージコミットを避ける
  - ブランチをきれいに保つ
  - リベースしたコミットを修正する
  - リベースしたコミットを削除する

- rebase前
```
git graph                                                                     [master]
* 74733a5  (HEAD -> master) 2024-08-03 shooonng A small update to readme.
| * 4d95a98  (new_feature) 2024-08-03 shooonng Starting a second new file
| * 35103b9  2024-08-03 shooonng Adding a new file to a new branch
|/
* 0db75f2  2024-08-03 shooonng Adding printf.
* eb93260  2024-08-03 shooonng Adding two numbers.
```

- rebase
```
git rebase master
```

- rebase後
```
git graph                                                                [new_feature]
* 37a762e  (HEAD -> new_feature) 2024-08-03 shooonng Starting a second new file
* 548b719  2024-08-03 shooonng Adding a new file to a new branch
* 74733a5  (master) 2024-08-03 shooonng A small update to readme.
* 0db75f2  2024-08-03 shooonng Adding printf.
* eb93260  2024-08-03 shooonng Adding two numbers.
```

- git reflogでリベースしたコミットを表示する
```
(つ・ω・)つgit reflog                                                               [new_feature]
37a762e (HEAD -> new_feature) HEAD@{0}: checkout: moving from master to new_feature
74733a5 (master) HEAD@{1}: checkout: moving from new_feature to master
37a762e (HEAD -> new_feature) HEAD@{2}: rebase (finish): returning to refs/heads/new_feature
37a762e (HEAD -> new_feature) HEAD@{3}: rebase (pick): Starting a second new file
548b719 HEAD@{4}: rebase (pick): Adding a new file to a new branch
74733a5 (master) HEAD@{5}: rebase (start): checkout master
```

- git reset hardでリベース前に戻す

- git rebase --interactive masterでインタラクティブリベースを行う
  - vimが起動する
  - squashでコミットを統合する

- 実際にsquashする前
```
git log -n 2 --stat --oneline                                            [new_feature]
c2498a9 (HEAD -> new_feature) Starting a second new file
 file3.c | 1 +
 1 file changed, 1 insertion(+)
ba822ee Adding a new file to a new branch
 newfile.txt | 1 +
 1 file changed, 1 insertion(+)
```

- 実際にsquashした後
- 2つのコミットが1つにまとめられる
```
git log -n 1 --stat                                                      [new_feature]
commit 6a0aff70d3501772b6901abc92b5bb0cf13a8baa (HEAD -> new_feature)
Author: shooonng <5511068t@gmail.com>
Date:   Sat Aug 3 20:06:23 2024 +0900

    Adding a new file to a new branch

    Starting a second new file

 file3.c     | 1 +
 newfile.txt | 1 +
 2 files changed, 2 insertions(+)
```

- git cherry-pickでコミットを適用する
  - ブランチをまたいでコミットを適用する
```
(つ・ω・)つgit graph                                                                     [master]
* c8874bf  (HEAD -> master) 2024-08-03 shooonng A small update to readme.
| * 400ff56  (new_feature) 2024-08-03 shooonng Starting a second new file
| * ec4760a  2024-08-03 shooonng Adding a new file to a new branch
|/
* ebf2828  2024-08-03 shooonng Adding printf.
* 2956fb5  2024-08-03 shooonng Adding two numbers.
* f3f0f2a  (another_fix_branch) 2024-08-03 shooonng Renaming c and d.
* 8147846  2024-08-03 shooonng Removed a and b.
* b1cb266  2024-08-02 shooonng Adding readme.txt
* e4dc86f  (tag: four_files_galore) 2024-08-01 shooonng Adding four empty files.
* 5a72f6b  2024-08-01 shooonng Adding b variable.
* 9bd8948  2024-08-01 shooonng This is the second commit.
* a5084af  2024-08-01 shooonng This is the first commit.
(base) /Users/stanaka/tmp/buildtools/math 24-08-04 8:18:52
 (つ・ω・)つgit cherry-pick 400ff56                                                       [master]
[master ad4aca5] Starting a second new file
 Date: Sat Aug 3 21:18:41 2024 +0900
 1 file changed, 1 insertion(+)
 create mode 100644 file3.c
(base) /Users/stanaka/tmp/buildtools/math 24-08-04 8:19:06
 (つ・ω・)つgit graph                                                                     [master]
* ad4aca5  (HEAD -> master) 2024-08-03 shooonng Starting a second new file
* c8874bf  2024-08-03 shooonng A small update to readme.
| * 400ff56  (new_feature) 2024-08-03 shooonng Starting a second new file
| * ec4760a  2024-08-03 shooonng Adding a new file to a new branch
|/
* ebf2828  2024-08-03 shooonng Adding printf.
* 2956fb5  2024-08-03 shooonng Adding two numbers.
* f3f0f2a  (another_fix_branch) 2024-08-03 shooonng Renaming c and d.
* 8147846  2024-08-03 shooonng Removed a and b.
* b1cb266  2024-08-02 shooonng Adding readme.txt
* e4dc86f  (tag: four_files_galore) 2024-08-01 shooonng Adding four empty files.
* 5a72f6b  2024-08-01 shooonng Adding b variable.
* 9bd8948  2024-08-01 shooonng This is the second commit.
* a5084af  2024-08-01 shooonng This is the first commit
```

## chap17
- git flowとgithub flowの違い
  - git flow
    - developブランチを使う
    - featureブランチを使う
    - releaseブランチを使う
    - hotfixブランチを使う
  - github flow
    - masterブランチを使う
    - featureブランチを使う
    - pull requestを使う

  ## chap18
  - GitHubについて
  - フォーク
    - 他のリポジトリを自分のリポジトリにコピーする
  - プロジェクトで使ってるので、詳細は省略

## chap19
- SourceTreeなどのサードパーティ製のツールについて
- SourceTreeは使ってるのと、Eclipseはもう時代遅れなので省力

## chap20
- git configについて
  - local, global, systemの3つの設定がある
  - local
    - リポジトリごとの設定
    - .git/configに保存される
  - global
    - ユーザごとの設定
    - ~/.gitconfigに保存される
  - system
    - システム全体の設定
    - /etc/gitconfigに保存される

- ある程度長くGitの設定を触っているのでGitConfigについては設定してある。globalの設定はこんな感じ
```
github.user=jacoloves
core.editor=nvim
core.preloadindex=true
core.excludesfile=/Users/stanaka/.gitignore_global
color.ui=auto
color.diff.meta=242 238
color.diff.frag=239 236
color.diff.old=167 normal
color.diff.new=030 normal
color.diff.context=240
color.diff.commit=246 024
alias.st=status
alias.co=checkout
alias.ci=commit
alias.br=switch
alias.lo=log --color --max-count=15 --oneline
alias.ll=lla --first-parent
alias.lla=log --graph --date=human --format='%C(#e3c78a)%h%C(#ff5454)%d%C(reset) - %C(#36c692)(%ad)%C(reset) %s %C(#80a0ff){%an}%C(reset)'
alias.graph=log --graph --date-order --all --pretty=format:'%h %Cred%d %Cgreen%ad %Cblue%cn %Creset%s' --date=short
alias.unadd=restore --staged
alias.review=diff origin/HEAD...
alias.rvf=diff origin/HEAD... --name-only
alias.rvc=log --oneline ...origin/HEAD
help.autocorrect=1
user.email=5511068t@gmail.com
user.name=shooonng
secrets.providers=git secrets --aws-provider
secrets.patterns=(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}
secrets.patterns=("|')?(AWS|aws|Aws)?_?(SECRET|secret|Secret)?_?(ACCESS|access|Access)?_?(KEY|key|Key)("|')?\s*(:|=>|=)\s*("|')?[A-Za-z0-9/\+=]{40}("|')?
secrets.patterns=("|')?(AWS|aws|Aws)?_?(ACCOUNT|account|Account)_?(ID|id|Id)?("|')?\s*(:|=>|=)\s*("|')?[0-9]{4}\-?[0-9]{4}\-?[0-9]{4}("|')?
init.templatedir=~/.git-templates/git-secrets
filter.lfs.clean=git-lfs clean -- %f
filter.lfs.smudge=git-lfs smudge -- %f
filter.lfs.process=git-lfs filter-process
filter.lfs.required=true
safe.directory=/Users/stanaka/tmp/new_lab/2024/remix-tutorial
difftool.sourcetree.cmd=opendiff "$LOCAL" "$REMOTE"
difftool.sourcetree.path=
mergetool.sourcetree.cmd=/Applications/Sourcetree.app/Contents/Resources/opendiff-w.sh "$LOCAL" "$REMOTE" -ancestor "$BASE" -merge "$MERGED"
mergetool.sourcetree.trustexitcode=true
push.default=simple
```

## Gitの学習を続けるのに役立つテクニック
1. クローンで作業する
2. ヘルプを使う
3. こまめにコミットする
  - git rebaseを使えば、レビューの前に小規模で中間的なコミットをまとめることができる
4. 共同作業を行う
