# {{ learn-git-in-month-of-lunches }}

**Date:** {{ 2024/07/27 }}

## chap1
- シラバス的なもの
- 進め方が書いてある

## chap2
### clone
指定されたURLからリポジトリをクローンする。
https://github.com/rickumali/RickUmaliVanityWebsite

```
ghq get git@github.com:rickumali/RickUmaliVanityWebsite.git
```

### git ls-files
```
git ls-files                                                                  [master]
.gitignore
README.txt
bio.tmpl
blog_start.tmpl
contact.tmpl
feedsn.pl
footer.tmpl
getfeed.pl
make_flickr_tmpl.sh
make_new_index.pl
make_ramblings_tmpl.sh
make_rick_index.sh
make_sports_tmpl.sh
make_tech_tmpl.sh
pictures_start.tmpl
process_flickr_feed.pl
process_sports_feed.pl
process_tech_feed.pl
processfeed.pl
rick-bootstrap.tmpl
sports_start.tmpl
tech_start.tmpl
```

### git blame
```
git blame master README.txt
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  1) rickumali-index
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  2)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  3) This is the software that generates the rickumali.com site.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  4)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400  5) This is a static site generated by a Perl-based static site generator. The
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400  6) templates were updated to Bootstrap in May 2021.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  7)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  8) --------------------------------------------------------------------------------
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000  9)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 10) The site is generated from four sub templates, using these programs:
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 11)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 12)   make_sports_tmpl.sh -> getfeed.pl -> process_sports_feed.pl = sports.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 13)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 14)   make_ramblings_tmpl.sh -> getfeed.pl -> processfeed.pl = blog.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 15)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 16)   make_tech_tmpl.sh -> getfeed.pl -> process_tech_feed.pl = tech.tmpl
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 17)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 18)   make_flickr_tmpl.sh -> wget -> process_flickr_feed.pl = pictures.tmpl
7308dd03 (Rick Umali 2013-01-07 23:03:45 -0500 19)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 20) Once these four subtemplates are generated, they are brought into the main
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 21) template (rick-bootstrap.tmpl).
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 22)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 23)   make_rick_index.sh -> make_new_index.pl ->
7308dd03 (Rick Umali 2013-01-07 23:03:45 -0500 24)     bio.tmpl + blog.tmpl + tech.tmpl + sports.tmpl + pictures.tmpl +
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 25)     contact.tmpl + footer.tmpl + rick-bootstrap.tmpl = index.html
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 26)
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 27) The site used to be generated once an hour, but now it is generated whenever
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 28) there's an update.
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 29)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 30) --------------------------------------------------------------------------------
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 31)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 32) References
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 33)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 34) http://www.template-toolkit.org/
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 35) https://getbootstrap.com/docs/5.0/
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 36) https://metacpan.org/release/libwww-perl
fbab02c8 (Rick Umali 2021-05-10 09:15:17 -0400 37) https://metacpan.org/pod/HTML::TokeParser
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 38)
436cf890 (Rick Umali 2009-09-05 02:10:36 +0000 39) Rick Umali / www.rickumali.com / rickumali@gmail.com
```

### git log
```
git log --oneline
bf1e635 Removes Google Analytics
fbab02c Update README
a40b84d Retire YUI, Bring in Bootstrap
ad45574 Change footer 'made with' line
4f5219c Change bio text slightly
faeabf9 Remove <hr> tag
833feaa Revamp SportsBlog feed generation
0646a0b Center contacts; Remove unnecessary container
9b8be74 Revamp start templates
b0e154d Revamp contact template
7e16a6e Add margin and rule line; Remove jumbotron
92a3f2f Use nav component; Make pills stack when small
7253cb8 Merge branch 'master' into converting_to_bootstrap
a036110 Fixes issue with blank preview text
ff27815 Uses wget instead of getfeed.pl
ef62cd1 Fixes 'Can't use a hash as a reference' errors
~snip~
```

## chap3
- git configでuser.nameとuser.emailは設定してるので問題なし（gitconfigは色々いじってる。）
```
git config --list | egrep ('user.email'|'user.name')                          [master]
user.email=5511068t@gmail.com
user.name=shooonng
```

- git help helpでgit helpの使い方が表示される
```
git help help
```

### 課題
1. gitの情報の格納場所
  - .gitconfig
2. stupid content trackerが記載されているgit helpのページ
  - ?
3. フォワードポートするときのコマンド
  - git push
4. DAGとは
  - Directed Acyclic Graph
5. チュートリアル形式のgit helpのページ
  - git help tutorial
6.7. はコマンドについて操作の延長線だったので割愛

## chap4
- git init
  - リポジトリの初期化
- git status
  - リポジトリの状態を確認
- git add
  - ファイルの追加
- git commit
  - ファイルのコミット

```
$ echo -n conteints > fiefixup.sh
$ git status                                                                    [master]
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	fiefixup.sh

nothing added to commit but untracked files present (use "git add" to track)
$ git add filefixup.txt
$ git status                                                                    [master]
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
	new file:   filefixup.txt
$ git commit -m "Thisn is the first commit message"                             [master]
[master (root-commit) 0cadc17] Thisn is the first commit message
 1 file changed, 1 insertion(+)
 create mode 100644 filefixup.txt
```

git log --statでコミットの変更内容を表示できる
```
git log --stat                                                                [master]
commit 0cadc175a7d18bd4d51f55e21ef2d849b67b08c1 (HEAD -> master)
Author: shooonng <5511068t@gmail.com>
Date:   Sun Jul 28 11:51:39 2024 +0900

    Thisn is the first commit message

 filefixup.txt | 1 +
 1 file changed, 1 insertion(+)
 ```

 ### 課題
 git init,git add, git statusの練習なので割愛
 この本が全体的にWindowsを使用を前提で書かれているので、
 LFのエラーについて言及があるが、MacやLinuxでは発生しないので割愛する

 ## chap5
 この章ではgit guiを使って操作しているが、Macではgit guiが使えないので、眺める程度にとどめた。
 もし本章を実施するのであればVSCodeのGit機能やSourceTreeを使うといいかもしれない

 ## chap6
 一度コミットしたファイルに再度変更を加えて、git statusを実行すると、変更があることがわかる
 ```
 git status                                                                    [master]
 On branch master
 Changes not staged for commit:
   (use "git add <file>..." to update what will be committed)
   (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh

 no changes added to commit (use "git add" and/or "git commit -a")
 ```
 - git diffで変更内容を確認できる
 ```
 git diff                                                                      [master]
 diff --git a/math.sh b/math.sh
 index 7c516fd..d06edc9 100644
 --- a/math.sh
 +++ b/math.sh
 @@ -1 +1,2 @@
  # Comment
 +a=1
 ```

 - git commit -aで変更をコミットできる
 ```
 git commit -a -m "This is the cecond commit"                                  [master]
 [master 0586e5e] This is the cecond commit
  1 file changed, 1 insertion(+)
 ```

- ステージングにあるファイルを変更して、git statusを実行すると、作業ディレクトリとステージングエリアの差分が表示される
```
git status                                                                    [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   math.sh

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh
```

- git diffで作業ディレクトリとステージングエリアの差分を表示できる
```
git diff                                                                      [master]
diff --git a/math.sh b/math.sh
index 9a439d4..c591e72 100644
--- a/math.sh
+++ b/math.sh
@@ -1,4 +1,3 @@
 # Comment
 a=1
-echo $a
 b=2
```

- git diff --stageでステージングエリアとリポジトリの差分を表示できる
```
git diff --staged                                                             [master]
diff --git a/math.sh b/math.sh
index d06edc9..9a439d4 100644
--- a/math.sh
+++ b/math.sh
@@ -1,2 +1,4 @@
 # Comment
 a=1
+echo $a
+b=2
```

- git addにはdry-runオプションがある
```
git add --dry-run .                                                           [master]
add 'math.sh'
add 'a'
add 'b'
add 'c'
add 'd'
```

### 課題
1. git diff --stagedの代わり
  - git diff --cached
2. git addのdry-runオプションの代わり
  - git add -n
3. catコマンドで行番号を表示する方法
  - cat -n
5. git commit -aの代わりもっと長い別の形式
  - git commit --all

- 間違ってgit addをした場合、git reset HEAD <file>でステージングエリアから取り消すことができる

- git log --shortstat --oneline でコミットの簡易情報を表示できる

### chap7
- git rmでファイルを削除するとステージングエリアからも削除される
上がgit rm,下がrm
```
g status                                                                      [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	deleted:    b

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	deleted:    a
```

- git mvでファイル名を変更するとステージングエリアに追加される
```
g status                                                                      [master]
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	renamed:    c -> another_rename
	renamed:    d -> renamed_file
```

- 部分的にコミットする
```
git add -p                                                                    [master]
```
eで編集、yでステージング、nでスキップ、qで終了

## chap8
- SHA1 IDはコミットのハッシュ値で、コミットの一意なIDを示す
- git log --parents --abbrev-commitは親コミットを表示する
- パッチ情報を出力
```
git log --patch
```

- HEADは最新のコミットを指す
- git rev-parse HEADとgit rev-parse masterは同じ結果を返す
- HEAD^は一つ前のコミットを指す
- HEAD^^^はHEADの親の親の親を指す masterの三つ前のコミットを指す　HEAD~3も同じ

## chap9
- コミットログは下から上に伸びるイメージ
- git brach, git checkoutの流れ
```
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:22
 (つ・ω・)つgit branch                                                                    [master]
* master
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:27
 (つ・ω・)つgit branch dev                                                                [master]
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:40
 (つ・ω・)つgit branch                                                                    [master]
  dev
* master
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:26:43
 (つ・ω・)つgit checkout dev                                                              [master]
Switched to branch 'dev'
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:27:30
 (つ・ω・)つgit branch                                                                       [dev]
* dev
  master
```
- git branch -dでブランチを削除できる
```
base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:27:37
 (つ・ω・)つgit branch -d master                                                             [dev]
Deleted branch master (was 33fdec5).
(base) /Users/stanaka/tmp/buildtools/empty 24-07-29 4:28:52
 (つ・ω・)つgit branch                                                                       [dev]
* dev
```

- git log --graphでコミットのグラフを表示できる(なかなか見やすいかも)
```
(つ・ω・)つg log --graph --decorate --pretty=oneline --all --abbrev-commit          [new_feature]
* e68c5e3 (HEAD -> new_feature) Starting a second new file
* 92a7ca3 Adding a new file to a new branch
| * 1adeefd (refs/stash) On master: !!GitHub_Desktop<master>
|/|
| * bbae30a index on master: 2fb2547 Removed a and b
|/
* 2fb2547 (master) Removed a and b
* 6404e5a Adding readme.txt
* 6adeab0 Adding four empty files
* 0586e5e This is the cecond commit
* 2145a3c This the first commit.
```

- git branch -vで最後のコミットメッセージを表示できる
```
(つ・ω・)つgit branch -v                                                            [new_feature]
  master      2fb2547 Removed a and b
* new_feature e68c5e3 Starting a second new file
```

- git branch SHA1でブランチを作成できる
```
(つ・ω・)つg log --oneline                                                               [master]
9c5a30e (HEAD -> master) A small update to readme.
2fb2547 Removed a and b
6404e5a Adding readme.txt
6adeab0 Adding four empty files
0586e5e This is the cecond commit
2145a3c This the first commit.
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:29:25
(つ・ω・)つgit branch fixing_readme 2fb2547                                              [master]
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:30:04
(つ・ω・)つgit checkout fixing_readme                                                    [master]
Switched to branch 'fixing_readme'
```

- git branch -bでブランチを作成してチェックアウトできる
- git branch -dでブランチを削除できる
- 削除したブランチを復元するにはgit reflogで削除したコミットのIDを確認してgit checkoutで復元する
```
(つ・ω・)つgit branch -d another_fix_branch                                              [master]
Deleted branch another_fix_branch (was 2fb2547).
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:41:49
 (つ・ω・)つgit checkout -b another_fix_branch 2fb2547                                    [master]
Switched to a new branch 'another_fix_branch'
(base) /Users/stanaka/tmp/buildtools/math 24-07-29 7:42:26
 (つ・ω・)つg graph                                                           [another_fix_branch]
* 9c5a30e  (master) 2024-07-29 shooonng A small update to readme.
| * e68c5e3  (new_feature) 2024-07-29 shooonng Starting a second new file
| * 92a7ca3  2024-07-29 shooonng Adding a new file to a new branch
|/
| * 1adeefd  (refs/stash) 2024-07-29 shooonng On master: !!GitHub_Desktop<master>
|/|
| * bbae30a  2024-07-29 shooonng index on master: 2fb2547 Removed a and b
|/
* 2fb2547  (HEAD -> another_fix_branch) 2024-07-28 shooonng Removed a and b
* 6404e5a  2024-07-28 shooonng Adding readme.txt
* 6adeab0  2024-07-28 shooonng Adding four empty files
* 0586e5e  2024-07-28 shooonng This is the cecond commit
* 2145a3c  2024-07-28 shooonng This the first commit.
```

- git stashで変更を一時的に保存できる
- git stash listでstashのリストを表示できる
```
(つ・ω・)つg stash list                                                      [another_fix_branch]
stash@{0}: WIP on another_fix_branch: 2fb2547 Removed a and b
stash@{1}: On master: !!GitHub_Desktop<master>
```

- git stash popでstashを復元できる
```
(つ・ω・)つg stash pop                                                       [another_fix_branch]
On branch another_fix_branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   math.sh

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (a6e0c9d15a5e3f15d4a0c6b8d407fd8cb9380428
```
- stashはスタックのデータ構造で管理されている

- git checkout -- <file>でファイルを直前のコミットに戻すことができる
```
(つ・ω・)つgit checkout -- math.sh
```

## chap10
- git mergeでブランチをマージできる
- git graphでマージのグラフ
```
つ・ω・)つg graph                                                           [another_fix_branch]
*   1443c68  (HEAD -> another_fix_branch) 2024-07-30 shooonng Merge branch 'master' into another_fix_branch
|\
* | 36bf1ad  2024-07-29 shooonng chap9 lecture
| * 9c5a30e  (master) 2024-07-29 shooonng A small update to readme.
|/
| * e68c5e3  (new_feature) 2024-07-29 shooonng Starting a second new file
| * 92a7ca3  2024-07-29 shooonng Adding a new file to a new branch
|/
| * 1adeefd  (refs/stash) 2024-07-29 shooonng On master: !!GitHub_Desktop<master>
|/|
| * bbae30a  2024-07-29 shooonng index on master: 2fb2547 Removed a and b
|/
* 2fb2547  2024-07-28 shooonng Removed a and b
* 6404e5a  2024-07-28 shooonng Adding readme.txt
* 6adeab0  2024-07-28 shooonng Adding four empty files
* 0586e5e  2024-07-28 shooonng This is the cecond commit
* 2145a3c  2024-07-28 shooonng This the first commit.
```

- git log -1
```
(つ・ω・)つgit log -1                                                        [another_fix_branch]
commit 1443c681ad3f9b3854c2636347509080fad12bc3 (HEAD -> another_fix_branch)
Merge: 36bf1ad 9c5a30e
Author: shooonng <5511068t@gmail.com>
Date:   Tue Jul 30 19:50:59 2024 +0900

    Merge branch 'master' into another_fix_branch
```
- git mergetoolでマージツールを起動できる

- fast-forwardマージ
```
(つ・ω・)つgit graph                                                                [new_feature]
* 3a3073b  (HEAD -> new_feature) 2024-07-30 shooonng Committing bar.
* b1b4a93  2024-07-30 shooonng Committing foo.
* 8f42c3b  (master) 2024-07-30 shooonng Committing baz.
* a2ee4e7  2024-07-30 shooonng Committing the README.
```

```
(つ・ω・)つgit checkout master                                                      [new_feature]
Switched to branch 'master'
(base) /Users/stanaka/tmp/buildtools/ff 24-07-30 20:05:48
 (つ・ω・)つgit merge new_feature                                                         [master]
Updating 8f42c3b..3a3073b
Fast-forward
 bar | 0
 foo | 0
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 bar
 create mode 100644 foo
(base) /Users/stanaka/tmp/buildtools/ff 24-07-30 20:05:52
 (つ・ω・)つgit graph                                                                     [master]
* 3a3073b  (HEAD -> master, new_feature) 2024-07-30 shooonng Committing bar.
* b1b4a93  2024-07-30 shooonng Committing foo.
* 8f42c3b  2024-07-30 shooonng Committing baz.
* a2ee4e7  2024-07-30 shooonng Committing the README.
```

### 課題
- git diff master...new_featureで差分を表示できる
- git merge-baseの意味
  - 2つのコミットの共通の祖先を見つける

## chap11
### クローンを作る
- git cloneで複製を作るリポジトリを指定できる
- git clone <url> <directory>でディレクトリ名を指定できる
```
git clone git@github.com:rickumali/RickUmaliVanityWebsite.git sample_git_practice
Cloning into 'sample_git_practice'...
remote: Enumerating objects: 307, done.
remote: Counting objects: 100% (70/70), done.
remote: Compressing objects: 100% (47/47), done.
remote: Total 307 (delta 34), reused 52 (delta 23), pack-reused 237
Receiving objects: 100% (307/307), 70.26 KiB | 235.00 KiB/s, done.
Resolving deltas: 100% (185/185), done.
``

- mathとmath.clone1
```
(base) /Users/stanaka/tmp/buildtools/math 24-07-30 20:17:15
 (つ・ω・)つgit log --simplify-by-decoration --decorate --all --oneline                   [master]
1443c68 (another_fix_branch) Merge branch 'master' into another_fix_branch
9c5a30e (HEAD -> master) A small update to readme.
e68c5e3 (new_feature) Starting a second new file
1adeefd (refs/stash) On master: !!GitHub_Desktop<master>
2145a3c This the first commit.

(base) /Users/stanaka/tmp/buildtools/math.clone1 24-07-30 20:19:56
 (つ・ω・)つgit branch --all                                                              [master]
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/another_fix_branch
  remotes/origin/master
  remotes/origin/new_feature
```

- ベアリポジトリ
  - ワーキングディレクトリがないリポジトリ
  - git clone --bareで作成できる
  - リモートリポジトリとして使える
  - リモートリポジトリとして使う場合は.gitを削除してリネームする
